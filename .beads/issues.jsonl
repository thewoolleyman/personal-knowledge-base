{"id":"personal-knowledge-base-0j6","title":"Create internal/apiclient HTTP client package","description":"New package internal/apiclient that wraps HTTP calls to the PKB server API. Must implement a Client interface with Search(ctx, query, sources) method. Sources param is a []string of connector names to include. TDD: write tests first against httptest server.","status":"closed","priority":1,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T21:22:27.485186-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T21:27:38.728143-08:00","closed_at":"2026-02-01T21:27:38.728143-08:00","close_reason":"HTTP client package implemented with TDD (9 tests)"}
{"id":"personal-knowledge-base-0q2","title":"Merge secrets-scan into CI/CD pipeline, delete standalone workflow","description":"secrets-scan.yml was incorrectly created as a standalone workflow. Gitleaks is a linting tool and belongs as a step in the single ci-cd.yml pipeline. Move it, delete the standalone file.","status":"closed","priority":1,"issue_type":"bug","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T11:01:44.859198-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T11:07:45.539202-08:00","closed_at":"2026-02-01T11:07:45.539202-08:00","close_reason":"Closed"}
{"id":"personal-knowledge-base-181","title":"Add CI-must-pass rule to CLAUDE.md and PRIME.md","description":"Add mandatory rule: NEVER push or continue work while CI is red. CI failures must be fixed first, or verified by human as infra/external and explicitly allowed. Update CLAUDE.md session close protocol, PRIME.md, and beads workflow context.","status":"closed","priority":1,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T11:01:47.69181-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T11:07:45.541178-08:00","closed_at":"2026-02-01T11:07:45.541178-08:00","close_reason":"Closed"}
{"id":"personal-knowledge-base-1l1","title":"Fix CI: golangci-lint Go version mismatch","description":"golangci-lint v1.64.8 is built with Go 1.24 and cannot lint Go 1.25.6 code. Fix: either pin a golangci-lint version built with Go 1.25+, or use go install with our Go toolchain.","status":"closed","priority":1,"issue_type":"bug","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T02:41:54.580584-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T02:48:33.682213-08:00","closed_at":"2026-02-01T02:48:33.682213-08:00","close_reason":"Fixed and CI is green"}
{"id":"personal-knowledge-base-1rc","title":"Add .env.example with placeholder values","description":"Add a tracked .env.example file showing required environment variables (PKB_GOOGLE_CLIENT_ID, PKB_GOOGLE_CLIENT_SECRET) with placeholder values for developer onboarding","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T04:51:22.971016-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T04:52:41.935153-08:00","closed_at":"2026-02-01T04:52:41.935153-08:00","close_reason":"Closed"}
{"id":"personal-knowledge-base-32y","title":"Move default token path to XDG config dir","description":"Change default OAuth token storage from ./token.json (project root) to ~/.config/pkb/token.json (XDG Base Directory). Create config dir if missing. Use TDD: test default path, test dir creation, implement, refactor.","status":"closed","priority":2,"issue_type":"feature","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T04:51:27.781853-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T04:55:22.811344-08:00","closed_at":"2026-02-01T04:55:22.811344-08:00","close_reason":"Implemented XDG-compliant default token path with TDD, 100% coverage","dependencies":[{"issue_id":"personal-knowledge-base-32y","depends_on_id":"personal-knowledge-base-mpj","type":"blocks","created_at":"2026-02-01T04:51:37.265471-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-59n","title":"Add version management for release tagging","description":"Decide and implement version source for the release workflow. Options: (a) tag-based releases where pushing a v* tag triggers release, (b) a VERSION file in repo root that the release workflow reads and auto-tags. The reference project reads version from manifest.json and auto-bumps after release. For our Go CLI, recommend tag-based (push v1.0.0 tag triggers release) since it is the standard Go convention. Add ldflags to inject version into the binary at build time (e.g. -ldflags \"-X main.version=$VERSION\"). Add a 'make version' target.","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T01:59:09.789586-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T02:27:03.539564-08:00","closed_at":"2026-02-01T02:27:03.539564-08:00","close_reason":"Implemented CI, release, and auto-merge workflows with version management"}
{"id":"personal-knowledge-base-5vm","title":"Epic: Comprehensive Testing Coverage for All Major Functionality","description":"## Problem\n\nSearch functionality is completely broken in the CLI app, but CI is green on main. This reveals critical gaps in the testing pyramid, particularly at the acceptance test level.\n\n## Root Cause\n\nAcceptance tests are not testing from the USER'S perspective. They must:\n1. Build the actual binary (go build)\n2. Execute as subprocess (exec.Command)\n3. Check stdout/stderr/exit codes\n4. NEVER import internal packages\n5. Treat the app as a black box\n\n## Testing Pyramid Requirements\n\n### Unit Tests (many, fast, isolated)\n- Test individual functions with mocks\n- Cover edge cases, error handling\n- Run with: go test ./...\n\n### Component Integration Tests (fewer, real interactions)\n- Test real components together (Connector + API)\n- Use build tag: //go:build integration\n- May require credentials/network\n\n### Acceptance Tests (fewest, USER perspective)\n- Test ACTUAL USER EXPERIENCE\n- Build real binary, run with real args\n- Check stdout/stderr/exit codes\n- Use build tag: //go:build acceptance\n- Run with: go test -tags=acceptance ./tests/acceptance/\n\n## THE RULE\n**If a human follows the README and gets an error, an acceptance test MUST catch it.**\n\n## Scope\n\nCover ALL major documented functionality:\n- search command (currently broken)\n- config command\n- version command\n- Any other user-facing commands in README\n- Error handling for bad inputs\n- Exit codes for success/failure\n\n## Success Criteria\n\n- [ ] All README examples have corresponding acceptance tests\n- [ ] Search functionality acceptance test exists and would catch current bug\n- [ ] 100% line coverage on new code (per function)\n- [ ] CI includes acceptance test run\n- [ ] make test-acceptance target exists\n- [ ] Documentation in README references make targets","status":"closed","priority":1,"issue_type":"epic","owner":"thewoolleyman@gmail.com","created_at":"2026-02-02T15:47:14.486811-08:00","created_by":"Chad Woolley","updated_at":"2026-02-02T16:13:15.812724-08:00","closed_at":"2026-02-02T16:13:15.812724-08:00","close_reason":"Closed"}
{"id":"personal-knowledge-base-6as","title":"Add gitleaks pre-commit hook for secret scanning","status":"closed","priority":1,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T10:34:27.873373-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T10:38:34.241357-08:00","closed_at":"2026-02-01T10:38:34.241357-08:00","close_reason":"Closed"}
{"id":"personal-knowledge-base-6j7","title":"Add gitleaks CI workflow for GitHub Actions","status":"closed","priority":1,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T10:34:33.696043-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T10:38:34.280965-08:00","closed_at":"2026-02-01T10:38:34.280965-08:00","close_reason":"Closed"}
{"id":"personal-knowledge-base-6jl","title":"Create release workflow: cross-compile CLI + GitHub Release","description":"Create .github/workflows/release.yml that triggers after CI passes on push to main. Stages: (1) extract version (from git tag or VERSION file), (2) cross-compile pkb binary for linux/amd64, linux/arm64, darwin/amd64, darwin/arm64, windows/amd64 using 'go build' with GOOS/GOARCH, (3) create GitHub Release with auto-generated notes and attach all binaries. Only create release on main branch pushes, skip if version/tag already released. Modeled after the release stage in tab-groups-windows-list ci-cd.yml.","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T01:59:02.63929-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T02:27:03.55871-08:00","closed_at":"2026-02-01T02:27:03.55871-08:00","close_reason":"Implemented CI, release, and auto-merge workflows with version management","dependencies":[{"issue_id":"personal-knowledge-base-6jl","depends_on_id":"personal-knowledge-base-9yh","type":"blocks","created_at":"2026-02-01T01:59:16.08424-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-6jl","depends_on_id":"personal-knowledge-base-59n","type":"blocks","created_at":"2026-02-01T01:59:16.175715-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-6to","title":"Epic: Refactor CLI/TUI to dogfood HTTP API","description":"All consumers (CLI, TUI, web UI) must go through the HTTP API. pkb search and pkb tui should start an embedded server on :0, make HTTP requests, and exit. pkb serve remains the long-lived mode. This ensures one API, one set of tests, one code path.","status":"closed","priority":1,"issue_type":"feature","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T21:22:12.635316-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T21:40:06.214468-08:00","closed_at":"2026-02-01T21:40:06.214468-08:00","close_reason":"All CLI/TUI consumers now dogfood the HTTP API"}
{"id":"personal-knowledge-base-7i1","title":"Obtain Google OAuth credentials and configure .env","description":"AI-assisted interactive walkthrough to obtain and configure OAuth credentials.\n\n## How It Works\n\n1. Start Claude Code with `claude --chrome` (gives Claude the browser tool to see pages and help you)\n2. Tell Claude: \"Walk me through obtaining the Google OAuth secret\"\n3. Claude guides you step-by-step, opening URLs, explaining what to click, answering questions\n4. Claude writes the credentials to .env and verifies the setup\n\nThis is NOT automation ‚Äî Claude is your interactive guide. You drive, Claude navigates.\n\n## Starting the Flow\n\n```bash\nclaude --chrome\n# Then say: \"Help me set up Google OAuth credentials for pkb\"\n# Or for any future service: \"Help me add Slack credentials to pkb\"\n```\n\n## Reference\n- Formula template: `.beads/formulas/mol-obtain-secret.formula.json`\n- Full guide: `docs/obtaining-secrets.md`\n\n## What Claude Does at Each Step\n- Opens the right URL in your browser\n- Tells you exactly what to click and fill in\n- Can see the page via `--chrome` if you get stuck\n- Writes credentials to .env (you never have to edit files manually)\n- Runs the auth flow and verifies everything works","status":"closed","priority":0,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T11:59:12.367609-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T12:36:55.17369-08:00","closed_at":"2026-02-01T12:36:55.17369-08:00","close_reason":"Closing as incorrect: bead was hand-created, not poured from the mol-obtain-secret formula. Will re-create properly via formula pour in a new session."}
{"id":"personal-knowledge-base-7os","title":"Create auto-merge workflow for claude/* branches","description":"Create .github/workflows/auto-merge.yml that triggers on push to claude/** branches. Runs the full test suite (lint, unit tests, acceptance tests), then creates a PR to main if tests pass. Modeled directly after tab-groups-windows-list auto-merge.yml but with Go toolchain (setup-go, make test, make test-accept) instead of Node (setup-node, npm test, playwright).","status":"closed","priority":3,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T01:59:06.176661-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T02:27:03.577935-08:00","closed_at":"2026-02-01T02:27:03.577935-08:00","close_reason":"Implemented CI, release, and auto-merge workflows with version management","dependencies":[{"issue_id":"personal-knowledge-base-7os","depends_on_id":"personal-knowledge-base-9yh","type":"blocks","created_at":"2026-02-01T01:59:16.266611-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-892","title":"Add OAuth setup instructions to README","description":"Expand README with Google OAuth credential setup instructions: how to get credentials from Google Cloud Console, set env vars, and run pkb auth","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T04:51:25.28846-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T04:52:41.955432-08:00","closed_at":"2026-02-01T04:52:41.955432-08:00","close_reason":"Closed"}
{"id":"personal-knowledge-base-9h5","title":"Add 80-char text snippet to search output","status":"closed","priority":2,"issue_type":"feature","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T17:43:40.030847-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T17:45:59.613203-08:00","closed_at":"2026-02-01T17:45:59.613203-08:00","close_reason":"Implemented with TDD - truncateSnippet helper + display in search output"}
{"id":"personal-knowledge-base-9k2","title":"Add redaction to hook log and context bundle scripts","status":"closed","priority":1,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T10:34:31.006885-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T10:38:34.260079-08:00","closed_at":"2026-02-01T10:38:34.260079-08:00","close_reason":"Closed"}
{"id":"personal-knowledge-base-9yh","title":"Create CI workflow: lint + unit tests + acceptance tests","description":"Create .github/workflows/ci.yml that runs on push to main and on PRs to main. Stages: (1) go vet + golangci-lint, (2) unit tests with race detection and coverage (make test), (3) acceptance tests (make test-accept). Use Go 1.25, ubuntu-latest. Cache go modules. Upload coverage as artifact. Modeled after the test stages in tab-groups-windows-list ci-cd.yml but with Go toolchain instead of Node.","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T01:58:59.133953-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T02:27:03.519921-08:00","closed_at":"2026-02-01T02:27:03.519921-08:00","close_reason":"Implemented CI, release, and auto-merge workflows with version management"}
{"id":"personal-knowledge-base-asj","title":"Write docs/SECRETS_SECURITY.md with findings and reproducible guidance","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T10:34:38.563493-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T10:39:55.920632-08:00","closed_at":"2026-02-01T10:39:55.920632-08:00","close_reason":"Documentation written at docs/SECRETS_SECURITY.md","dependencies":[{"issue_id":"personal-knowledge-base-asj","depends_on_id":"personal-knowledge-base-6as","type":"blocks","created_at":"2026-02-01T10:34:47.567054-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-asj","depends_on_id":"personal-knowledge-base-9k2","type":"blocks","created_at":"2026-02-01T10:34:47.657416-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-asj","depends_on_id":"personal-knowledge-base-6j7","type":"blocks","created_at":"2026-02-01T10:34:47.747892-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-asj","depends_on_id":"personal-knowledge-base-pr1","type":"blocks","created_at":"2026-02-01T10:34:47.842748-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-b3g","title":"Epic: Enable Live API and E2E Tests in All CI Runs","description":"## Problem\n\nLive API tests and Playwright E2E tests are SKIPPED in most CI runs due to overly restrictive conditions.\n\n**Evidence:** https://github.com/thewoolleyman/personal-knowledge-base/actions/runs/21610400777\n- Event: workflow_dispatch (manual trigger)\n- Branch: main\n- Result: Live API Tests and Playwright E2E Tests both SKIPPED\n\n## Root Cause\n\nIn .github/workflows/ci-cd.yml, both jobs have:\n```yaml\nif: github.ref == 'refs/heads/main' \u0026\u0026 github.event_name == 'push'\n```\n\nThis means they:\n- ‚ùå DON'T run on workflow_dispatch (manual triggers)\n- ‚ùå DON'T run on pull requests\n- ‚ùå DON'T run on any branch except main\n- ‚úÖ ONLY run on direct pushes to main\n\n## Impact\n\n- Tests are never validated before merging (PRs don't run them)\n- Manual CI runs skip critical integration tests\n- Regressions can be introduced without detection\n- No way to verify tests work without pushing to main\n\n## Required Changes\n\n### 1. Fix Workflow Conditions (ci-cd.yml)\n\n**live-tests job (lines 107-137):**\n```yaml\n# BEFORE:\nif: github.ref == 'refs/heads/main' \u0026\u0026 github.event_name == 'push'\n\n# AFTER:\nif: |\n  github.ref == 'refs/heads/main' \u0026\u0026 \n  (github.event_name == 'push' || github.event_name == 'workflow_dispatch')\n```\n\n**e2e-tests job (lines 139-194):**\n```yaml\n# Same change as above\n```\n\n### 2. Verify Required Secrets\n\nBoth jobs need these secrets configured in GitHub:\n- PKB_TOKEN_JSON\n- PKB_GOOGLE_CLIENT_ID\n- PKB_GOOGLE_CLIENT_SECRET\n\nAction items:\n- [ ] Verify all secrets exist in repo settings\n- [ ] Document secret setup in CI docs\n- [ ] Add graceful failure if secrets missing\n\n### 3. Consider Pull Request Execution\n\n**Options:**\n1. Run on all PRs (requires secrets in repo, not fork PRs)\n2. Run only on PRs from same repo (not forks)\n3. Add manual approval for PR runs\n4. Keep main-only but allow workflow_dispatch\n\n**Recommendation:** Start with workflow_dispatch support, evaluate PR runs separately.\n\n### 4. Validate Tests Can Run\n\nBefore closing this epic, must:\n- [ ] Trigger manual workflow_dispatch run\n- [ ] Verify live-tests job executes (not skipped)\n- [ ] Verify e2e-tests job executes (not skipped)\n- [ ] Both jobs must pass (green)\n\n## Success Criteria\n\n- [ ] workflow_dispatch triggers run live-tests\n- [ ] workflow_dispatch triggers run e2e-tests\n- [ ] All required secrets documented\n- [ ] At least one successful manual run with both tests passing\n- [ ] Document when tests run (push vs dispatch vs PR)\n\n## Security Considerations\n\n- Secrets must NEVER be exposed to fork PRs\n- Consider using environment protection rules\n- Document secret rotation procedure\n\n## Related\n\n- Depends on secrets being properly configured\n- May need credentials refresh if tests fail\n- Consider adding test data fixtures to reduce credential dependence","notes":"Created after discovering workflow run 21610400777 skipped critical tests due to event_name condition.","status":"closed","priority":1,"issue_type":"epic","owner":"thewoolleyman@gmail.com","created_at":"2026-02-02T15:55:01.966685-08:00","created_by":"Chad Woolley","updated_at":"2026-02-02T16:13:15.814959-08:00","closed_at":"2026-02-02T16:13:15.814959-08:00","close_reason":"Closed"}
{"id":"personal-knowledge-base-b4w","title":"Epic: Define project management workflow (beads + Claude Flow)","description":"Explore and document how Claude Flow features (DDD domains, ADRs, agents) complement or conflict with beads issue tracking. Produce docs/project-management.md explaining the canonical workflow for planning and developing this project. Includes any workflow/code changes that are necessary.","status":"closed","priority":1,"issue_type":"feature","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T15:52:13.727554-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T15:53:44.130066-08:00","closed_at":"2026-02-01T15:53:44.130066-08:00","close_reason":"Documented workflow in docs/project-management.md. No code changes needed -- beads and Claude Flow complement each other without conflict."}
{"id":"personal-knowledge-base-bcs","title":"Add Gmail connector","description":"Implement a Gmail connector following the existing Connector interface (Search, Name methods). Should search Gmail messages using the Gmail API. Use the same OAuth infrastructure as the gdrive connector. Include unit tests with mocked API client, following the same pattern as gdrive.","status":"closed","priority":3,"issue_type":"feature","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T02:03:20.652283-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T04:32:04.117323-08:00","closed_at":"2026-02-01T04:32:04.117323-08:00","close_reason":"Implemented Gmail connector with 100% coverage and Drive fallback"}
{"id":"personal-knowledge-base-bdu","title":"Add make open-cicd-webpage target","status":"closed","priority":3,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T11:54:53.559653-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T11:55:25.163022-08:00","closed_at":"2026-02-01T11:55:25.163022-08:00","close_reason":"Added make open-cicd-webpage target"}
{"id":"personal-knowledge-base-bhz","title":"Set up GitHub Actions CI/CD","description":"Epic: Set up CI/CD pipeline using GitHub Actions, modeled after tab-groups-windows-list/.github but adapted for our Go CLI project. Pipeline should: (1) run all linters and tests on push/PR to main, (2) build cross-platform CLI binaries, (3) create GitHub Releases with attached binaries. Reference workflow uses staged approach: Build ‚Üí Test ‚Üí Release.","status":"closed","priority":2,"issue_type":"feature","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T01:58:50.7871-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T02:27:03.597172-08:00","closed_at":"2026-02-01T02:27:03.597172-08:00","close_reason":"Implemented CI, release, and auto-merge workflows with version management"}
{"id":"personal-knowledge-base-brc","title":"Add make run target that builds and passes all args","description":"Add a make run target: builds the binary then runs it with all args passed through. Usage: make run search agentic, make run --help, make run auth. Should work like: go build ... \u0026\u0026 ./pkb $(ARGS)","status":"closed","priority":2,"issue_type":"feature","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T17:25:41.15841-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T17:32:13.01823-08:00","closed_at":"2026-02-01T17:32:13.01823-08:00","close_reason":"Implemented and tested"}
{"id":"personal-knowledge-base-bu6","title":"Wire web UI serving into pkb serve","description":"pkb serve should serve the embedded web UI at / (root) and the API at /search, /health. Web UI fetches from the same origin API. No CORS needed since same-origin. TDD: acceptance test that pkb serve returns HTML at / and JSON at /search.","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T21:22:49.358146-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T21:42:59.461484-08:00","closed_at":"2026-02-01T21:42:59.461484-08:00","close_reason":"Web UI wired into pkb serve at /","dependencies":[{"issue_id":"personal-knowledge-base-bu6","depends_on_id":"personal-knowledge-base-qlq","type":"blocks","created_at":"2026-02-01T21:23:06.545302-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-c1t","title":"Acceptance tests for web UI","description":"Black-box acceptance tests: build binary, start pkb serve, verify GET / returns HTML with search form, verify /search?q=test\u0026sources=gdrive returns JSON, verify source filtering works. Test that gmail is not included when sources param omits it.","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T21:22:52.234121-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T21:43:48.785919-08:00","closed_at":"2026-02-01T21:43:48.785919-08:00","close_reason":"Web UI acceptance test passes","dependencies":[{"issue_id":"personal-knowledge-base-c1t","depends_on_id":"personal-knowledge-base-bu6","type":"blocks","created_at":"2026-02-01T21:23:06.751562-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-cd1","title":"Add interactive OAuth token generation flow","description":"Currently the app requires pre-existing OAuth tokens (credentials.json + token.json). Add an interactive setup/auth command that walks the user through the OAuth consent flow: opens browser, handles callback, saves token. This is needed for first-time setup without manually crafting tokens.","status":"closed","priority":3,"issue_type":"feature","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T02:03:22.810882-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T04:32:04.209542-08:00","closed_at":"2026-02-01T04:32:04.209542-08:00","close_reason":"Implemented interactive OAuth auth command with browser flow"}
{"id":"personal-knowledge-base-cjj","title":"Fix errcheck lint violations in oauth_test.go","description":"golangci-lint errcheck flags unchecked os.WriteFile (line 41) and os.Chmod (line 88) in oauth_test.go. Fix by checking returns with require.NoError.","status":"closed","priority":1,"issue_type":"bug","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T02:44:22.955846-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T02:48:33.684329-08:00","closed_at":"2026-02-01T02:48:33.684329-08:00","close_reason":"Fixed and CI is green"}
{"id":"personal-knowledge-base-d1j","title":"Improve cmd/pkb test coverage from 59.7% to 90%+","description":"cmd/pkb currently has 59.7% test coverage. The TDD rule requires 100% on new code, and existing gaps should be closed. Audit cmd/pkb/main.go and main_test.go, identify untested paths (likely: error branches in buildSearchFn, edge cases in cobra command setup, signal handling paths), and add unit tests to cover them.","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T02:03:07.859496-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T04:02:02.98551-08:00","closed_at":"2026-02-01T04:02:02.98551-08:00","close_reason":"All functions at 100% coverage (excluding main). CI enforcement uses per-function checks."}
{"id":"personal-knowledge-base-dnp","title":"Epic: Mandate E2E Tests for All User-Facing Epic Completions","description":"## Problem\n\nEpics can currently be closed without verifying that user-facing functionality has top-of-the-pyramid E2E/acceptance tests. This allowed the search functionality bug to slip through even though CI was green.\n\n## Root Cause\n\nNo documented or enforced requirement that:\n- New user-facing features must have acceptance tests\n- Epics must verify test coverage before closing\n- Agents must check for E2E tests during epic completion\n\n## Solution\n\nCreate mandatory checkpoints in documentation, workflows, and prompts that REQUIRE E2E tests for any user-facing functionality before an epic can be closed.\n\n## Implementation Tasks\n\n### 1. Update CLAUDE.md - Mandatory Testing Requirements\n\nAdd new section after the Testing Pyramid section (around line 140):\n\n```markdown\n### üö® EPIC COMPLETION REQUIREMENTS\n\n**MANDATORY: Before closing ANY epic that adds or modifies user-facing functionality:**\n\n1. **Acceptance Test Checklist:**\n   - [ ] Acceptance tests exist for ALL new CLI commands\n   - [ ] Acceptance tests exist for ALL new HTTP endpoints\n   - [ ] Acceptance tests exist for ALL new UI features\n   - [ ] Tests build real binary and execute as subprocess\n   - [ ] Tests check stdout/stderr/exit codes (black box)\n   - [ ] Tests NEVER import internal packages\n   - [ ] Tests mirror what README instructs users to do\n\n2. **Test Coverage Verification:**\n   - [ ] Run: `go test -tags=acceptance -v ./tests/acceptance/`\n   - [ ] All new functionality tests pass\n   - [ ] Tests would catch regression if functionality broke\n\n3. **Documentation Alignment:**\n   - [ ] Every README example has corresponding acceptance test\n   - [ ] Test names reference README sections\n   - [ ] Failure messages guide users to documentation\n\n**THE RULE:**\n\u003e If a human follows the README and gets an error, an acceptance test MUST exist that would have caught it before merge.\n\n**NO EXCEPTIONS:** Epics cannot be closed without these checks. If acceptance tests are blocked by external dependencies, file a blocker bead.\n```\n\n### 2. Update docs/project-management.md\n\nAdd new section \"Epic Completion Checklist\":\n\n```markdown\n## Epic Completion Checklist\n\nBefore closing an epic with `bd close \u003cid\u003e`, verify:\n\n### For ALL Epics:\n- [ ] All child beads are closed\n- [ ] No blocking dependencies remain\n- [ ] CI is green on main\n- [ ] Code is merged and deployed\n- [ ] Documentation updated\n\n### For User-Facing Features (MANDATORY):\n- [ ] **Acceptance tests exist** (see Testing Pyramid in CLAUDE.md)\n- [ ] Tests build real binary as subprocess\n- [ ] Tests verify from user's perspective (black box)\n- [ ] Tests mirror README examples\n- [ ] Run `make test-accept` - all pass\n- [ ] Manual verification: follow README steps yourself\n\n### For Internal Refactors:\n- [ ] Unit tests updated\n- [ ] Integration tests if needed\n- [ ] No user-facing behavior changed\n- [ ] Performance benchmarks if applicable\n\n### Red Flags That Require Acceptance Tests:\n- Added new CLI command or flag\n- Added new HTTP endpoint\n- Changed CLI output format\n- Modified error messages users see\n- Updated README with new examples\n- Fixed a bug a user reported\n\n**If you can't write acceptance tests yet:**\n1. File a blocker bead explaining why\n2. Update epic description with blocker details\n3. DO NOT close epic until blocker resolved\n```\n\n### 3. Create .beads/templates/EPIC_COMPLETION_CHECKLIST.md\n\nNew file with template agents can reference:\n\n```markdown\n# Epic Completion Checklist\n\nEpic ID: `________`  \nEpic Title: `________`  \nCompleted By: `________`  \nDate: `________`\n\n## 1. Core Requirements\n- [ ] All child beads closed\n- [ ] CI green on main\n- [ ] Code merged\n- [ ] Documentation updated\n\n## 2. User-Facing Functionality Check\n\n**Does this epic add or modify user-facing features?**\n- [ ] YES - Complete section 3 below (MANDATORY)\n- [ ] NO - Skip to section 4\n\n## 3. Acceptance Test Requirements (MANDATORY for user-facing)\n\n### 3.1 Test Existence\n- [ ] Acceptance tests written in `tests/acceptance/`\n- [ ] Tests use `//go:build acceptance` tag\n- [ ] Tests build real binary with `buildBinary(t)`\n- [ ] Tests execute as subprocess with `exec.Command`\n- [ ] Tests verify stdout/stderr/exit codes\n- [ ] Tests NEVER import `internal/*` packages\n\n### 3.2 Test Coverage\n- [ ] Every new CLI command has test: `TestAcceptance_\u003cCommand\u003e*`\n- [ ] Every new HTTP endpoint has test: `TestAcceptance_\u003cEndpoint\u003e*`\n- [ ] Every README example has corresponding test\n- [ ] Error cases tested (bad input, missing config, etc.)\n\n### 3.3 Test Execution\nRun and verify:\n```bash\nmake test-accept\n```\n- [ ] All tests pass\n- [ ] No tests skipped (unless documented)\n- [ ] Tests would catch regression if feature broke\n\n### 3.4 Manual Verification\n- [ ] Followed README steps manually\n- [ ] Built binary: `make build`\n- [ ] Ran each new command\n- [ ] Verified output matches expectations\n- [ ] Checked error handling\n\n## 4. Sign-off\n\nI verify that:\n- All checklist items above are complete\n- If user-facing, acceptance tests exist and pass\n- Epic can be safely closed\n\nSignature: `________`  \nDate: `________`\n\n---\n\n**IMPORTANT:** If any acceptance tests cannot be written yet, file a blocker bead and DO NOT close this epic.\n```\n\n### 4. Update Beads Workflow Context (.beads/PRIME.md)\n\nAdd to the \"Session Close Protocol\" section:\n\n```markdown\n## Epic Completion Protocol\n\n**Before running `bd close \u003cepic-id\u003e`:**\n\n1. Check epic type:\n   - Feature/Enhancement with user-facing changes? ‚Üí Requires acceptance tests\n   - Bug fix for user-reported issue? ‚Üí Requires acceptance test\n   - Internal refactor with no user changes? ‚Üí Unit tests sufficient\n\n2. For user-facing epics:\n   - [ ] Run: `make test-accept`\n   - [ ] All tests pass\n   - [ ] New functionality has test coverage\n   - [ ] Tests verify from user perspective (black box)\n   - [ ] Reference: .beads/templates/EPIC_COMPLETION_CHECKLIST.md\n\n3. For all epics:\n   - [ ] CI green\n   - [ ] All child beads closed\n   - [ ] Documentation updated\n\n**Agents: DO NOT close epics without this verification!**\n```\n\n### 5. Add CI Check (Optional - Follow-up Task)\n\nConsider adding CI job that:\n- Detects if acceptance tests were modified\n- Requires acceptance tests for PRs with user-facing changes\n- Comments on PRs missing acceptance tests\n\nFile as separate task: \"Add CI check for acceptance test coverage\"\n\n## Success Criteria\n\n- [ ] CLAUDE.md updated with epic completion requirements\n- [ ] docs/project-management.md has epic checklist\n- [ ] .beads/templates/EPIC_COMPLETION_CHECKLIST.md created\n- [ ] .beads/PRIME.md updated with epic protocol\n- [ ] Pattern stored in memory for future reference\n- [ ] All documentation changes committed and pushed\n\n## Validation\n\nAfter implementation:\n1. Close this epic using the new checklist\n2. Verify checklist catches missing items\n3. Update based on lessons learned\n4. Store pattern in memory\n\n## Related\n\n- Blocks: Any future epics with user-facing features\n- Related to: personal-knowledge-base-5vm (comprehensive testing coverage)\n- Related to: personal-knowledge-base-b3g (CI test execution)\n\n## Notes\n\nThis is a process improvement that prevents the class of bugs where:\n- CI is green (unit tests pass with mocks)\n- User-facing functionality is broken\n- No acceptance test exists to catch it\n\nThe rule is simple: **If a user can trigger it, an acceptance test must verify it.**","notes":"Process improvement to prevent user-facing bugs from slipping through CI with green status.","status":"closed","priority":1,"issue_type":"epic","owner":"thewoolleyman@gmail.com","created_at":"2026-02-02T15:59:28.991769-08:00","created_by":"Chad Woolley","updated_at":"2026-02-02T16:13:15.817241-08:00","closed_at":"2026-02-02T16:13:15.817241-08:00","close_reason":"Closed"}
{"id":"personal-knowledge-base-dt5","title":"Refactor pkb tui command to use HTTP client","description":"pkb tui/interactive should: start embedded server on :0, create apiclient pointed at it, use that for search calls within the Bubble Tea model. Remove direct search.Engine dependency. TDD: update TUI tests.","status":"closed","priority":1,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T21:22:34.708037-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T21:34:42.91853-08:00","closed_at":"2026-02-01T21:34:42.91853-08:00","close_reason":"TUI now dogfoods HTTP API via embedded server","dependencies":[{"issue_id":"personal-knowledge-base-dt5","depends_on_id":"personal-knowledge-base-0j6","type":"blocks","created_at":"2026-02-01T21:23:05.987444-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-dt5","depends_on_id":"personal-knowledge-base-fm9","type":"blocks","created_at":"2026-02-01T21:23:06.082433-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-dws","title":"Auto-load .env file on app startup","description":"On startup, auto-load .env from the working directory if it exists. Use godotenv or similar. No manual source/export should be needed ‚Äî if .env has PKB_GOOGLE_CLIENT_ID and PKB_GOOGLE_CLIENT_SECRET, pkb should pick them up.","status":"closed","priority":2,"issue_type":"feature","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T17:25:38.389665-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T17:32:13.014948-08:00","closed_at":"2026-02-01T17:32:13.014948-08:00","close_reason":"Implemented and tested"}
{"id":"personal-knowledge-base-f0q","title":"Update acceptance tests for API-dogfooding architecture","description":"Acceptance tests must verify: pkb search goes through HTTP (not direct engine call), pkb serve endpoints still work, source filtering works end-to-end. Black-box tests only ‚Äî build binary, run as subprocess.","status":"closed","priority":1,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T21:22:37.450354-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T21:39:06.378623-08:00","closed_at":"2026-02-01T21:39:06.378623-08:00","close_reason":"Acceptance tests updated and passing with new architecture","dependencies":[{"issue_id":"personal-knowledge-base-f0q","depends_on_id":"personal-knowledge-base-rpx","type":"blocks","created_at":"2026-02-01T21:23:06.177038-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-f0q","depends_on_id":"personal-knowledge-base-dt5","type":"blocks","created_at":"2026-02-01T21:23:06.268463-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-fm9","title":"Add source filtering to /search API endpoint","description":"Extend GET /search to accept optional sources query param: /search?q=foo\u0026sources=gdrive,gmail. If sources omitted, search all connectors. search.Engine.Search needs a way to filter which connectors run. TDD: test the endpoint with various source combinations.","status":"closed","priority":1,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T21:22:30.229611-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T21:32:16.54583-08:00","closed_at":"2026-02-01T21:32:16.54583-08:00","close_reason":"Source filtering added to engine and HTTP handler with TDD","dependencies":[{"issue_id":"personal-knowledge-base-fm9","depends_on_id":"personal-knowledge-base-0j6","type":"blocks","created_at":"2026-02-01T21:23:05.702684-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-grc","title":"Improve TUI test coverage from 82.9% to 95%+","description":"internal/tui has 82.9% coverage. Identify remaining untested paths in tui.go (likely: window size handling, edge cases in key bindings, viewport scrolling states) and add tests. Previous bugs BUG-003, BUG-012, BUG-013 are already covered.","status":"closed","priority":3,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T02:03:12.398243-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T04:02:03.023511-08:00","closed_at":"2026-02-01T04:02:03.023511-08:00","close_reason":"All functions at 100% coverage (excluding main). CI enforcement uses per-function checks."}
{"id":"personal-knowledge-base-h6d","title":"Add /search API endpoint to HTTP server","description":"The serve command currently only exposes /health. Add a /search endpoint that accepts a query parameter, runs the search engine, and returns JSON results. This is needed before the app can be used as an API service. Should include acceptance tests that hit the real endpoint.","status":"closed","priority":2,"issue_type":"feature","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T02:03:18.25569-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T04:32:03.935061-08:00","closed_at":"2026-02-01T04:32:03.935061-08:00","close_reason":"Implemented /search API endpoint with JSON responses and full test coverage"}
{"id":"personal-knowledge-base-hgr","title":"Improve gdrive connector test coverage from 64.3% to 90%+","description":"internal/connectors/gdrive has 64.3% test coverage across gdrive.go, client.go, and oauth.go. Identify untested branches (likely: real API error paths in client.go, OAuth flow edge cases, token refresh failures) and add unit tests with mocks to cover them.","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T02:03:10.148528-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T04:02:03.005755-08:00","closed_at":"2026-02-01T04:02:03.005755-08:00","close_reason":"All functions at 100% coverage (excluding main). CI enforcement uses per-function checks."}
{"id":"personal-knowledge-base-iv2","title":"Update README and docs for web UI","description":"Document the web UI: how to access it (pkb serve then open browser), source selector behavior, gmail-off-by-default rationale. Update architecture diagram to show web UI as another API client. Add screenshot or usage example.","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T21:22:54.549131-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T21:57:04.346617-08:00","closed_at":"2026-02-01T21:57:04.346617-08:00","close_reason":"README updated for web UI","dependencies":[{"issue_id":"personal-knowledge-base-iv2","depends_on_id":"personal-knowledge-base-c1t","type":"blocks","created_at":"2026-02-01T21:23:06.852576-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-kw9","title":"Live API tests: CLI search hits real Google Drive and Gmail","description":"Add top-of-pyramid live integration tests that build the real binary and search for PERSONAL_KNOWLEDGE_BASE_TEST_PAGE_DO_NOT_DELETE against real Google Drive and Gmail APIs. Tests verify that the Obsidian-synced file appears in gdrive results and the test email appears in gmail results. Uses build tag //go:build live. Requires PKB_GOOGLE_CLIENT_ID, PKB_GOOGLE_CLIENT_SECRET, PKB_TOKEN_PATH. Add make test-live target and CI job with secrets.","status":"closed","priority":1,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T22:42:23.332115-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T22:47:06.934444-08:00","closed_at":"2026-02-01T22:47:06.934444-08:00","close_reason":"Closed"}
{"id":"personal-knowledge-base-mol-1y4","title":"Open google developer console","description":"Claude runs `open https://console.cloud.google.com/` to open the browser. Uses browser tool to verify page loaded. Ask: 'Are you signed in? Do you see your project, or do we need to create one?'","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:43:50.4389-08:00","updated_at":"2026-02-01T12:49:37.245007-08:00","closed_at":"2026-02-01T12:49:37.245007-08:00","close_reason":"Corrupted by manual dep editing; re-pouring clean","dependencies":[{"issue_id":"personal-knowledge-base-mol-1y4","depends_on_id":"personal-knowledge-base-mol-qe9","type":"parent-child","created_at":"2026-02-01T12:43:50.442162-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-mol-1y4","depends_on_id":"personal-knowledge-base-mol-8jw","type":"blocks","created_at":"2026-02-01T12:43:50.446135-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mol-2og","title":"Write credentials to .env","description":"Write credentials to .env (creating from .env.example if needed). Set each var in PKB_GOOGLE_CLIENT_ID,PKB_GOOGLE_CLIENT_SECRET with the values the user pasted. Verify .env is in .gitignore.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:43:50.440244-08:00","updated_at":"2026-02-01T12:49:37.326716-08:00","closed_at":"2026-02-01T12:49:37.326716-08:00","close_reason":"Corrupted by manual dep editing; re-pouring clean","dependencies":[{"issue_id":"personal-knowledge-base-mol-2og","depends_on_id":"personal-knowledge-base-mol-qe9","type":"parent-child","created_at":"2026-02-01T12:43:50.444798-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-mol-2og","depends_on_id":"personal-knowledge-base-mol-c0b","type":"blocks","created_at":"2026-02-01T12:43:50.44889-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mol-51b","title":"Open google developer console","description":"Claude runs `open https://console.cloud.google.com/` to open the browser. Uses browser tool to verify page loaded. Ask: 'Are you signed in? Do you see your project, or do we need to create one?'","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:49:45.744014-08:00","updated_at":"2026-02-01T16:12:20.282264-08:00","closed_at":"2026-02-01T16:12:20.282264-08:00","close_reason":"Created new GCP project personal-knowledge-base-486200, switched to it","dependencies":[{"issue_id":"personal-knowledge-base-mol-51b","depends_on_id":"personal-knowledge-base-mol-6d8","type":"parent-child","created_at":"2026-02-01T12:49:45.746616-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-mol-51b","depends_on_id":"personal-knowledge-base-mol-au6","type":"blocks","created_at":"2026-02-01T12:49:45.750573-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mol-59e","title":"Obtain oauth credentials","description":"For secret_type=oauth: Create Credentials \u003e OAuth client ID, select desktop app, name it, copy Client ID and Client Secret. For secret_type=token: generate or locate the API token/key. Ask user to paste each credential value into the chat.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:49:45.744774-08:00","updated_at":"2026-02-01T16:59:43.79844-08:00","closed_at":"2026-02-01T16:59:43.79844-08:00","close_reason":"OAuth client created: PKB Desktop, desktop app type, credentials captured","dependencies":[{"issue_id":"personal-knowledge-base-mol-59e","depends_on_id":"personal-knowledge-base-mol-6d8","type":"parent-child","created_at":"2026-02-01T12:49:45.748626-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-mol-59e","depends_on_id":"personal-knowledge-base-mol-gwc","type":"blocks","created_at":"2026-02-01T12:49:45.752648-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mol-5cr","title":"Verify setup","description":"Source .env, export the vars in PKB_GOOGLE_CLIENT_ID,PKB_GOOGLE_CLIENT_SECRET, run make build. For secret_type=oauth: run ./pkb auth to trigger browser-based OAuth flow, tell user to authorize. For secret_type=token: skip auth step. Then run ./pkb search 'test' to confirm credentials work. Report success or troubleshoot.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:49:45.745273-08:00","updated_at":"2026-02-01T17:05:27.095863-08:00","closed_at":"2026-02-01T17:05:27.095863-08:00","close_reason":"Auth succeeded, token saved to ~/.config/pkb/token.json, search returns Drive results","dependencies":[{"issue_id":"personal-knowledge-base-mol-5cr","depends_on_id":"personal-knowledge-base-mol-6d8","type":"parent-child","created_at":"2026-02-01T12:49:45.749923-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-mol-5cr","depends_on_id":"personal-knowledge-base-mol-6t7","type":"blocks","created_at":"2026-02-01T12:49:45.754355-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mol-6d8","title":"mol-obtain-secret","description":"Interactive AI-assisted walkthrough for obtaining credentials (OAuth or API token) from any provider. Start Claude Code with `claude --chrome`, then pour this formula. Claude guides you step-by-step, opens URLs, answers questions, writes .env, and verifies the setup.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-01T12:49:45.743074-08:00","updated_at":"2026-02-01T17:05:27.209743-08:00","closed_at":"2026-02-01T17:05:27.209743-08:00","close_reason":"All molecule steps complete: GCP project created, APIs enabled, OAuth consent configured, credentials obtained, .env written, auth verified"}
{"id":"personal-knowledge-base-mol-6t7","title":"Write credentials to .env","description":"Write credentials to .env (creating from .env.example if needed). Set each var in PKB_GOOGLE_CLIENT_ID,PKB_GOOGLE_CLIENT_SECRET with the values the user pasted. Verify .env is in .gitignore.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:49:45.745013-08:00","updated_at":"2026-02-01T17:00:31.733457-08:00","closed_at":"2026-02-01T17:00:31.733457-08:00","close_reason":"Wrote .env with Client ID and Client Secret, verified .gitignore excludes .env","dependencies":[{"issue_id":"personal-knowledge-base-mol-6t7","depends_on_id":"personal-knowledge-base-mol-6d8","type":"parent-child","created_at":"2026-02-01T12:49:45.749262-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-mol-6t7","depends_on_id":"personal-knowledge-base-mol-59e","type":"blocks","created_at":"2026-02-01T12:49:45.753618-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mol-8jw","title":"Verify prerequisites","description":"Claude checks: (1) claude --chrome is active (browser tool available), (2) .env.example exists, (3) confirm which google account the user will use. Ask if they already have a google developer project/app or need to create one.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:43:50.438595-08:00","updated_at":"2026-02-01T12:49:37.223933-08:00","closed_at":"2026-02-01T12:49:37.223933-08:00","close_reason":"Corrupted by manual dep editing; re-pouring clean","dependencies":[{"issue_id":"personal-knowledge-base-mol-8jw","depends_on_id":"personal-knowledge-base-mol-qe9","type":"blocks","created_at":"2026-02-01T12:48:43.544448-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mol-a3y","title":"Verify setup","description":"Source .env, export the vars in PKB_GOOGLE_CLIENT_ID,PKB_GOOGLE_CLIENT_SECRET, run make build. For secret_type=oauth: run ./pkb auth to trigger browser-based OAuth flow, tell user to authorize. For secret_type=token: skip auth step. Then run ./pkb search 'test' to confirm credentials work. Report success or troubleshoot.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:43:50.440484-08:00","updated_at":"2026-02-01T12:49:37.347435-08:00","closed_at":"2026-02-01T12:49:37.347435-08:00","close_reason":"Corrupted by manual dep editing; re-pouring clean","dependencies":[{"issue_id":"personal-knowledge-base-mol-a3y","depends_on_id":"personal-knowledge-base-mol-qe9","type":"parent-child","created_at":"2026-02-01T12:43:50.445483-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-mol-a3y","depends_on_id":"personal-knowledge-base-mol-2og","type":"blocks","created_at":"2026-02-01T12:43:50.450026-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mol-au6","title":"Verify prerequisites","description":"Claude checks: (1) claude --chrome is active (browser tool available), (2) .env.example exists, (3) confirm which google account the user will use. Ask if they already have a google developer project/app or need to create one.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:49:45.743711-08:00","updated_at":"2026-02-01T16:06:56.808186-08:00","closed_at":"2026-02-01T16:06:56.808186-08:00","close_reason":"Prerequisites verified: chrome active, .env.example present, account=thewoolleyman@gmail.com, need new GCP project","dependencies":[{"issue_id":"personal-knowledge-base-mol-au6","depends_on_id":"personal-knowledge-base-mol-6d8","type":"parent-child","created_at":"2026-02-01T12:49:45.745753-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mol-c0b","title":"Obtain oauth credentials","description":"For secret_type=oauth: Create Credentials \u003e OAuth client ID, select desktop app, name it, copy Client ID and Client Secret. For secret_type=token: generate or locate the API token/key. Ask user to paste each credential value into the chat.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:43:50.439917-08:00","updated_at":"2026-02-01T12:49:37.307005-08:00","closed_at":"2026-02-01T12:49:37.307005-08:00","close_reason":"Corrupted by manual dep editing; re-pouring clean","dependencies":[{"issue_id":"personal-knowledge-base-mol-c0b","depends_on_id":"personal-knowledge-base-mol-qe9","type":"parent-child","created_at":"2026-02-01T12:43:50.444138-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-mol-c0b","depends_on_id":"personal-knowledge-base-mol-pat","type":"blocks","created_at":"2026-02-01T12:43:50.448199-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mol-gwc","title":"Configure google for oauth","description":"For secret_type=oauth: open consent screen page, walk through user type (External), app name, emails, scopes (drive.readonly,gmail.readonly), remind user to add themselves as test user. For secret_type=token: navigate to the token/key generation page in the provider dashboard. Guide user through any provider-specific configuration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:49:45.744529-08:00","updated_at":"2026-02-01T16:52:52.10491-08:00","closed_at":"2026-02-01T16:52:52.10491-08:00","close_reason":"Consent screen configured: External, app=Personal Knowledge Base, scopes=drive.readonly+gmail.readonly, test user=thewoolleyman@gmail.com","dependencies":[{"issue_id":"personal-knowledge-base-mol-gwc","depends_on_id":"personal-knowledge-base-mol-6d8","type":"parent-child","created_at":"2026-02-01T12:49:45.747983-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-mol-gwc","depends_on_id":"personal-knowledge-base-mol-lp8","type":"blocks","created_at":"2026-02-01T12:49:45.75196-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mol-lp8","title":"Enable required APIs","description":"If Google Drive API, Gmail API is non-empty: walk user through enabling each API listed in Google Drive API, Gmail API. Tell them what to search for, what to click, confirm each is enabled. If Google Drive API, Gmail API is empty: skip this step.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:49:45.74427-08:00","updated_at":"2026-02-01T16:18:26.500113-08:00","closed_at":"2026-02-01T16:18:26.500113-08:00","close_reason":"Enabled Google Drive API and Gmail API in project personal-knowledge-base-486200","dependencies":[{"issue_id":"personal-knowledge-base-mol-lp8","depends_on_id":"personal-knowledge-base-mol-6d8","type":"parent-child","created_at":"2026-02-01T12:49:45.747318-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-mol-lp8","depends_on_id":"personal-knowledge-base-mol-51b","type":"blocks","created_at":"2026-02-01T12:49:45.751248-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mol-pat","title":"Configure google for oauth","description":"For secret_type=oauth: open consent screen page, walk through user type (External), app name, emails, scopes (drive.readonly,gmail.readonly), remind user to add themselves as test user. For secret_type=token: navigate to the token/key generation page in the provider dashboard. Guide user through any provider-specific configuration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:43:50.439648-08:00","updated_at":"2026-02-01T12:49:37.285577-08:00","closed_at":"2026-02-01T12:49:37.285577-08:00","close_reason":"Corrupted by manual dep editing; re-pouring clean","dependencies":[{"issue_id":"personal-knowledge-base-mol-pat","depends_on_id":"personal-knowledge-base-mol-qe9","type":"parent-child","created_at":"2026-02-01T12:43:50.443493-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-mol-pat","depends_on_id":"personal-knowledge-base-mol-xtc","type":"blocks","created_at":"2026-02-01T12:43:50.447483-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mol-qe9","title":"mol-obtain-secret","description":"Interactive AI-assisted walkthrough for obtaining credentials (OAuth or API token) from any provider. Start Claude Code with `claude --chrome`, then pour this formula. Claude guides you step-by-step, opens URLs, answers questions, writes .env, and verifies the setup.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-01T12:43:50.437582-08:00","updated_at":"2026-02-01T12:49:37.202038-08:00","closed_at":"2026-02-01T12:49:37.202038-08:00","close_reason":"Corrupted by manual dep editing; re-pouring clean"}
{"id":"personal-knowledge-base-mol-xtc","title":"Enable required APIs","description":"If Google Drive API, Gmail API is non-empty: walk user through enabling each API listed in Google Drive API, Gmail API. Tell them what to search for, what to click, confirm each is enabled. If Google Drive API, Gmail API is empty: skip this step.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:43:50.439347-08:00","updated_at":"2026-02-01T12:49:37.264892-08:00","closed_at":"2026-02-01T12:49:37.264892-08:00","close_reason":"Corrupted by manual dep editing; re-pouring clean","dependencies":[{"issue_id":"personal-knowledge-base-mol-xtc","depends_on_id":"personal-knowledge-base-mol-qe9","type":"parent-child","created_at":"2026-02-01T12:43:50.44284-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-mol-xtc","depends_on_id":"personal-knowledge-base-mol-1y4","type":"blocks","created_at":"2026-02-01T12:43:50.446803-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-mpj","title":"Add token.json to .gitignore","description":"Explicitly add token.json to .gitignore to prevent accidental commit of OAuth refresh tokens","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T04:51:20.558158-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T04:52:41.915055-08:00","closed_at":"2026-02-01T04:52:41.915055-08:00","close_reason":"Closed"}
{"id":"personal-knowledge-base-nbu","title":"Epic: Web UI with source filtering","description":"Add an interactive web UI served from pkb serve. HTML/JS/CSS embedded in the Go binary. Features: search box, source selector (checkboxes for each connector), results display. Gmail defaults to OFF (too spammy). Web UI is just another API client ‚Äî same endpoint as CLI/TUI.","status":"closed","priority":1,"issue_type":"feature","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T21:22:19.780766-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T21:57:04.420918-08:00","closed_at":"2026-02-01T21:57:04.420918-08:00","close_reason":"Web UI complete with search, source selector, Gmail off by default","dependencies":[{"issue_id":"personal-knowledge-base-nbu","depends_on_id":"personal-knowledge-base-6to","type":"blocks","created_at":"2026-02-01T21:23:06.452029-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-pr1","title":"Gitignore machine-local state files (daemon-state.json, daemon.pid)","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T10:34:36.17824-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T10:38:34.332109-08:00","closed_at":"2026-02-01T10:38:34.332109-08:00","close_reason":"Closed"}
{"id":"personal-knowledge-base-qlq","title":"Create embedded web UI with search and source selector","description":"Build HTML/JS/CSS web UI embedded in Go binary via embed.FS. Features: search input box, source selector checkboxes (one per connector, gmail unchecked by default), results list showing title/snippet/url/source. Vanilla JS, no framework ‚Äî keep it simple. TDD: test the handler serves HTML, test JS behavior.","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T21:22:46.966058-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T21:41:57.356963-08:00","closed_at":"2026-02-01T21:41:57.356963-08:00","close_reason":"Web UI created with search, source selector, Gmail off by default","dependencies":[{"issue_id":"personal-knowledge-base-qlq","depends_on_id":"personal-knowledge-base-fm9","type":"blocks","created_at":"2026-02-01T21:23:06.638505-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-qm6","title":"Populate Snippet field in Google Drive search results","description":"gdrive.go:49 has a TODO: 'populate Snippet from file description or content snippet when available'. Currently the Snippet field in search results is always empty. The Google Drive API can return file descriptions and content snippets. Wire these into the result Snippet field so search results show meaningful previews.","status":"closed","priority":3,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T02:03:14.987098-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T04:32:04.024331-08:00","closed_at":"2026-02-01T04:32:04.024331-08:00","close_reason":"Populated Snippet field from Drive file description"}
{"id":"personal-knowledge-base-rpx","title":"Refactor pkb search command to use HTTP client","description":"pkb search should: start embedded server on :0, create apiclient pointed at it, call Search(), print results, shut down. Remove direct search.Engine dependency from the search command. TDD: update existing CLI tests to verify HTTP round-trip.","status":"closed","priority":1,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T21:22:32.376216-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T21:34:06.539073-08:00","closed_at":"2026-02-01T21:34:06.539073-08:00","close_reason":"Search command now dogfoods HTTP API via embedded server","dependencies":[{"issue_id":"personal-knowledge-base-rpx","depends_on_id":"personal-knowledge-base-0j6","type":"blocks","created_at":"2026-02-01T21:23:05.795177-08:00","created_by":"Chad Woolley"},{"issue_id":"personal-knowledge-base-rpx","depends_on_id":"personal-knowledge-base-fm9","type":"blocks","created_at":"2026-02-01T21:23:05.88987-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-s9a","title":"Auto-create critical bug bead on unexpected CI failure","description":"Add a step to ci-cd.yml that, on unexpected failure, runs bd create to file a P0 bug bead and commits it. This ensures CI failures cannot be ignored -- agents see the bead on next bd sync.","status":"closed","priority":2,"issue_type":"feature","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T11:01:50.224364-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T11:35:16.916095-08:00","closed_at":"2026-02-01T11:35:16.916095-08:00","close_reason":"Added notify-failure job to ci-cd.yml: auto-creates P0 bug bead via jq+JSONL on any main-branch failure. Updated CLAUDE.md and PRIME.md with reference to the safety net.","dependencies":[{"issue_id":"personal-knowledge-base-s9a","depends_on_id":"personal-knowledge-base-0q2","type":"blocks","created_at":"2026-02-01T11:01:56.369499-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-upq","title":"Update README and docs for API-dogfooding architecture","description":"Update architecture diagram to show all consumers going through HTTP API. Update command docs, package descriptions, and setup instructions. Remove misleading direct-call architecture.","status":"closed","priority":1,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T21:22:39.532772-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T21:40:06.147044-08:00","closed_at":"2026-02-01T21:40:06.147044-08:00","close_reason":"README updated for new architecture","dependencies":[{"issue_id":"personal-knowledge-base-upq","depends_on_id":"personal-knowledge-base-f0q","type":"blocks","created_at":"2026-02-01T21:23:06.360609-08:00","created_by":"Chad Woolley"}]}
{"id":"personal-knowledge-base-weo","title":"Add acceptance tests for /search endpoint, snippets, auth command, and Gmail","description":"Write top-of-pyramid acceptance tests for all remaining feature beads: (1) /search API endpoint - start server, GET /search?q=test, verify JSON response. (2) Auth command - pkb auth --help shows usage. (3) Gmail connector - pkb search --help mentions multiple services. (4) Search output includes snippets when available. All tests build the real binary and test from user perspective.","status":"closed","priority":2,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T04:19:26.093779-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T04:32:04.300138-08:00","closed_at":"2026-02-01T04:32:04.300138-08:00","close_reason":"Added 4 acceptance tests: auth help, auth without creds, help lists auth, serve /search endpoint"}
{"id":"personal-knowledge-base-x6q","title":"Playwright E2E tests: web UI search hits real APIs","description":"Install Playwright and add E2E tests for the web UI that start pkb serve, navigate to the web UI, search for PERSONAL_KNOWLEDGE_BASE_TEST_PAGE_DO_NOT_DELETE, and verify results from both Google Drive and Gmail. Add tests/e2e/ directory with package.json and Playwright config. Add make test-e2e target and CI job.","status":"closed","priority":1,"issue_type":"task","owner":"thewoolleyman@gmail.com","created_at":"2026-02-01T22:42:28.581487-08:00","created_by":"Chad Woolley","updated_at":"2026-02-01T22:50:36.525669-08:00","closed_at":"2026-02-01T22:50:36.525669-08:00","close_reason":"Closed"}
